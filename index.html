<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basketball Leagues</title>
    <script>
      // Single Page App GitHub Pages Redirect Handler
      // This script handles the redirect from 404.html by decoding the path from the query string
      // and using the History API to navigate to the correct route.
      // See: https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/') {
          var decoded = l.search.slice(1).split('&').map(function(s) {
            return s.replace(/~and~/g, '&');
          }).join('?');
          window.history.replaceState(null, null,
            l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location));
    </script>
    <style>
      /* Initial loading state styles - inline to show before JS loads */
      .initial-loading {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: #f3f4f6;
        font-family: system-ui, -apple-system, sans-serif;
        padding: 1rem;
        text-align: center;
      }
      .initial-loading.hidden {
        display: none;
      }
      .initial-loading .emoji {
        font-size: 3rem;
        animation: bounce 1s ease-in-out infinite;
      }
      .initial-loading p {
        color: #6b7280;
        margin-top: 1rem;
      }
      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <!-- Loading state shown before React mounts -->
    <div class="initial-loading" id="initial-loading">
      <div class="emoji">üèÄ</div>
      <p>Loading Basketball Leagues...</p>
    </div>
    <!-- Fallback for browsers with JavaScript disabled -->
    <noscript>
      <div style="min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; background-color: #f3f4f6; font-family: system-ui, -apple-system, sans-serif; padding: 1rem; text-align: center;">
        <div style="font-size: 3rem;">üèÄ</div>
        <h1 style="font-size: 1.25rem; font-weight: bold; color: #111827; margin: 1rem 0 0.5rem;">JavaScript Required</h1>
        <p style="color: #6b7280; max-width: 20rem;">Please enable JavaScript in your browser to use Basketball Leagues.</p>
      </div>
    </noscript>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Check if React has mounted and hide loading indicator
      // Uses MutationObserver to detect when React adds content to #root
      (function() {
        var root = document.getElementById('root');
        var loading = document.getElementById('initial-loading');
        
        if (!root || !loading) return;
        
        // Hide loading when React mounts (adds children to root)
        var observer = new MutationObserver(function(mutations) {
          if (root.hasChildNodes()) {
            loading.classList.add('hidden');
            observer.disconnect();
          }
        });
        
        observer.observe(root, { childList: true });
        
        // Fallback: show error if React fails to mount after 10 seconds
        setTimeout(function() {
          if (!root.hasChildNodes() && loading) {
            loading.innerHTML = '<div class="emoji">üèÄ</div><p style="color: #dc2626;">Failed to load app. Please refresh the page.</p><button onclick="location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #ea580c; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">Refresh</button>';
          }
        }, 10000);
      })();
    </script>
  </body>
</html>
